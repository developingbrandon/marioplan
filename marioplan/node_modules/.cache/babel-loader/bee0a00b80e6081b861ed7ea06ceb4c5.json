{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: !0\n}), exports.pathStrToObj = pathStrToObj, exports.getEventsFromInput = getEventsFromInput, exports.default = void 0;\n\nvar _remove2 = _interopRequireDefault(require(\"lodash/remove\")),\n    _isObject2 = _interopRequireDefault(require(\"lodash/isObject\")),\n    _flatMap2 = _interopRequireDefault(require(\"lodash/flatMap\")),\n    _populate = require(\"./populate\"),\n    _query = require(\"./query\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction pathStrToObj(path) {\n  var pathObj = {\n    path: path,\n    type: \"value\",\n    isQuery: !1\n  },\n      queryId = (0, _query.getQueryIdFromPath)(path);\n\n  if (queryId) {\n    var pathArray = path.split(\"#\");\n    pathObj = Object.assign({}, pathObj, {\n      queryId: queryId,\n      isQuery: !0,\n      path: pathArray[0],\n      queryParams: pathArray[1].split(\"&\")\n    }), (0, _populate.getPopulates)(pathArray[1].split(\"&\")) && (pathObj.populates = (0, _populate.getPopulates)(pathArray[1].split(\"&\")), pathObj.queryParams = (0, _remove2.default)(pathArray[1].split(\"&\"), function (p) {\n      return -1 === p.indexOf(\"populate\");\n    }));\n  }\n\n  return pathObj;\n}\n\nfunction getEventsFromInput(paths) {\n  return (0, _flatMap2.default)(paths, function (path) {\n    if (\"string\" == typeof path || path instanceof String) return [pathStrToObj(path)];\n    if (Array.isArray(path)) return [{\n      type: \"first_child\",\n      path: path[0]\n    }, {\n      type: \"child_added\",\n      path: path[0]\n    }, {\n      type: \"child_removed\",\n      path: path[0]\n    }, {\n      type: \"child_moved\",\n      path: path[0]\n    }, {\n      type: \"child_changed\",\n      path: path[0]\n    }];\n\n    if ((0, _isObject2.default)(path)) {\n      if (!path.path) throw new Error(\"Path is a required parameter within definition object\");\n      var strPath = path.path;\n      return path.storeAs && (strPath += \"@\".concat(path.storeAs)), path.queryParams && (strPath += \"#\".concat(path.queryParams.join(\"&\"))), path = Object.assign({}, pathStrToObj(strPath), path), [path];\n    }\n\n    throw new Error(\"Invalid Path Definition: \".concat(path, \". Only strings, objects, and arrays accepted.\"));\n  });\n}\n\nvar _default = {\n  getEventsFromInput: getEventsFromInput\n};\nexports.default = _default;","map":null,"metadata":{},"sourceType":"script"}